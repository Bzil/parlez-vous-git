<!doctype html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="description" content="Exercices de la formation Parlez-Vous Android ?">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Parlez-vous Git - Exercices</title>
    <link href="css/bootstrap.css" rel="stylesheet">
    <link href="css/main.css" rel="stylesheet">
</head>
<body>
    <div class="masthead">
        <div class="container lead">
            <h1>Parlez-vous Git ?</h1>
            <p>Approche pratique de Git.</p>
            <p class="excilys"><span>by</span> <a href="http://www.excilys.com/">Excilys</a></p> 
        </div>
    </div>
    <div class="container">
        <div class="row-fluid">
	    <!-- 30 min -->
            <section id="exercice1.1">
                <h1>Exercice 1.1 - Comprendre les Objets git</h1>
                <p>Le but de cet exercice est de se familiariser avec le concept de Git, à travers l'utilisation de ses commandes bas niveau.</p>
		<div class="media">
                    <img class="media-object pull-left" src="img/exo1.1.png" width="400px" />
                    <div class="media-body">
                        <p>Indications:</p>
                        <ul>
	                    <li>Télécharger l'archive suivante: <strong>git-repo-content.zip</strong>, l'extraire dans un dossier <strong>repo1.1</strong> et initialiser un nouveau repo git à l'intérieur de celui-cill avec la commande <br /><pre>git init</pre></li>
 			    <li>Créer les objets <strong>Blob</strong> des trois fichiers textes avec la commande <br /><pre>git hash-object -w nomdufichier.txt</pre></li>
                            <li>Il faut maintenant ajouter vos fichiers à l'index de Git, en utilisant la commande <br /><pre>git update-index --add nomdufichier.txt</pre></li>
                            <li>Créer les objets <strong>Tree</strong> pour que git enregistre l'arborescence avec la commande <br /><pre>git write-tree</pre></li>
                            <li>Commitez votre <strong>Tree</strong> pour enregistrer une sorte de "snapshot" de votre projet <br /><pre>echo 'mon premier commit' | git commit-tree sha_du_tree_a_commiter</pre></li>
                        </ul>
                    </div>
                </div>
		<div class="media">
                    <img class="media-object pull-left" src="img/exo1.2.png" width="400px" />
                    <div class="media-body">
                        <p>Indications:</p>
                        <ul>

	                    <li>Modifier <i>fichier3.txt</i> et créer l'objet <strong>Blob</strong> associé, l'ajouter à l'index, et recréer un objet <strong>Tree</strong>.</li>
 			    <li>Commiter le nouveau <strong>Tree</strong> en spécifiant le commit parent: <br /><pre>echo 'mon deuxieme commit' | git commit-tree sha_du_tree_a_commiter -p sha_du_commit_parent</pre></li>
                        </ul>
                    </div>
                </div>
		<div class="media">
                    <img class="media-object pull-left" src="img/exo1.3.png" width="400px" />
                    <div class="media-body">
                        <p>Indications:</p>
                        <ul>

	                    <li>Modifier <i>fichier1.txt</i> et créer l'objet <strong>Blob</strong> associé, l'ajouter à l'index, et recréer un objet <strong>Tree</strong>.</li>
 			    <li>Commiter le nouveau <strong>Tree</strong> en spécifiant le commit parent: <br /><pre>echo 'mon troisieme commit' | git commit-tree sha_du_tree_a_commiter -p sha_du_commit_parent</pre></li>
 			    <li>Créez un <strong>annoted Tag</strong> "v1.0" qui pointe sur le troisième commit: <br /><pre>git tag -a nomdutag sha_du_commit_parent -m "message"</pre></li>
			</ul>
			<p>Vous avez maintenant réussi à créer un historique git complet! vous pouvez afficher l'historique en utilisant la commande <br/><pre>git log --stat sha_du_dernier_commit</pre></p>
                    </div>
                </div>
            </section>
	    <!-- 20 min -->
	    <section id="exercice1.2">
                <h1>Exercice 1.2 - Comprendre les Références git</h1>
                <p>En reprenant l'exercice précédent, nous allons maintenant implémenter les références aux Objets pour mieux en comprendre les principes.</p>
		<div class="media">
                    <img class="media-object" src="img/exo1.3.png" />
                    <div class="media-body">
                        <p>Indications:</p>
                        <ul>

	                    <li>Créer une référence qui s'appelle "master" dans heads (<=> branche) vers le dernier commit en utilisant la commande: <br/><pre>git update-ref refs/heads/master sha_du_dernier_commit</pre> </li>
			    <li>Créer une référence qui s'appelle "old" dans heads (<=> branche) vers le deuxième commit en utilisant la commande: <br/><pre>git update-ref refs/heads/old sha_du_deuxieme_commit</pre> </li>
 			    <li>Pour savoir où l'on est placé à l'instant t, git utilise une référence appelée <strong>HEAD</strong>, qui pointe vers une branche. Pour la créer, il suffit d'exécuter:<br/><pre>git symbolic-ref HEAD refs/heads/old</pre></li>
                            <li>Créer un <strong>lightweight Tag</strong> "v0.0" sur le premier commit. Quelle est la différence avec le <strong>Tag</strong> v1 créé précédemment? <br /><pre>git update-ref refs/tags/nomdutag sha_du_commit</pre> </li>
			    <li>Initialiser un nouveau repo central <i>parlez-vous-git-remote-exo1.2.git</i> dans votre répertoire personnel (ici: /home/user/git/parlez-vous-git-remote-exo1.2.git), et l'initialiser avec la commande <pre>git init --bare</pre></li>
			    <li>Dans votre projet: ajouter ce repo en tant que repo distant par défaut (appelé <strong>origin</strong>):<pre> git remote add origin chemindurepo</pre></li>
			    <li>Pusher votre branche master sur le repo central origin <pre> git push origin master</pre></li>
			    <li>Pusher vos tags sur le repo central origin <pre> git push --tag origin</pre></li>
                        </ul>
                    </div>
                </div>
		<div class="media">
                    <div class="media-body">
                        <p>A la fin de cet exercice, votre git lola devrait donner:</p>
<pre>
* 531b54f (tag: v1.0, origin/master, master) mon troisieme commit<br />
* 4995a59 (HEAD, old) mon deuxieme commit<br />
* 7b1290b (tag: v0.0) mon premier commit
</pre>
                    </div>
                </div>
            </section>
	    <!-- 20 min -->
            <section id="exercice2">
                <h1>Exercice 2 - Branches/merge</h1>
                <p>Le but de cette exercice est de comprendre l'intérêt des branches, et de prendre en main un merge (en reprenant l'exercice précédent)</p>
                <div class="media">
                    <div class="media-body">
                        <h3>Etape 1:</h3>
                        <ul>
             		    <li>Se positionner sur la branche master, et créer une nouvelle branche <strong>develop</strong>:<br /><pre> git checkout -b develop</pre></li>
             		    <li>Modifier le <i>fichier1.txt</i>, créer un fichier <i>fichier4.txt</i> dans <i>dossier1/</i> et supprimer <i>fichier2.txt</i></li>
             		    <li>Ajouter les modifications et suppressions à l'index:<pre> git add -u .</pre></li>			
             		    <li>Ajouter les nouveaux fichiers à l'index:<pre> git add .</pre></li>
             		    <li>Maintenant que tous vos fichiers sont dans l'index, vous pouvez commiter votre index:<br/><pre>git commit -m "mon quatrieme commit sur la branche develop"</pre></li>
			    <li>Pousser votre branche <strong>develop</strong> sur le repo <strong>origin</strong></li>
			</ul>
                    </div>
                </div>
                <div class="media">
                    <div class="media-body">
                        <h3>Etape 2:</h3>
                        <ul>
			    <li>Revenir sur la branche <strong>master</strong></li>
             		    <li>Modifier le <i>fichier3.txt</i>, l'ajouter à l'index</li>
             		    <li>Commiter les changements avec le message "mon cinquieme commit sur la branche master"</li>
             		    <li>Pousser les changements sur le repo <strong>origin</strong></li>
			</ul>
                    </div>
                </div>
                <div class="media">
                    <div class="media-body">
                        <h3>Etape 3:</h3>
                        <ul>
			    <li>Merger la branche <strong>develop</strong> sur le <strong>master</strong>: <pre>git merge develop -m "merge de la branche develop sur master"</pre></li>
			    <li>Pusher la branche <strong>master</strong> sur le repo distant</li>
             		    <li>Supprimer la branche <strong>develop</strong> locale: <pre>git branch -D develop</pre></li>
             		    <li>Supprimer la branche <strong>develop</strong> distante (<strong>!Délicat!</strong>): <pre>git push origin :develop</pre></li>
			</ul>
                    </div>
                </div>
                <div class="media">
                    <div class="media-body">
                        <h3>Votre repo local doit maintenant ressembler à ceci:</h3>
<pre>
*   68f8252 (HEAD, origin/master, master) merge de la branche develop sur master
|\  
| * 7abe660 mon quatrieme commit sur la branche develop
* | f980135 mon cinquieme commit sur la branche master
|/  
* 531b54f (tag: v1.0) mon troisieme commit
* 4995a59 (old) mon deuxieme commit
* 7b1290b (tag: v0.0) mon premier commit
</pre>
                    </div>
                </div>
	    </section>
	    <section id="exercice3">
                <h1>Exercice 3 - Rebase</h1>
                <p>Le but de cette exercice est de comprendre l'intérêt d'un rebase</p>
                <div class="media">
                    <div class="media-body">
                        <p>Etape 1: Simulation d'un commit d'une autre personne:</p>
                        <ul>
             		    <li>Se positionner sur votre repo <strong>distant</strong> (exo 1.2)</li>
             		    <li>Modifier le <i>fichier1.txt</i> et commiter les changements</li>
			</ul>
			<p>Etape 2: Simulation d'un commit d'une autre personne:</p>
                        <ul>
             		    <li>Se positionner sur votre repo <strong>local</strong></li>
             		    <li>Modifier le <i>fichier2.txt</i> et commiter les changements</li>
             		    <li>Tenter de pusher les changements sur le master</li>
             		    <li>Récupérer la dernière version du repo origin via: <pre>git fetch origin</pre></li>
             		    <li>Appliquer vos commits au dessus de ceux du repo avec:<pre>git rebase origin/master</pre></li>
             		    <li>Pusher les changements sur le master</li>
			</ul>
                    </div>
                </div>               
	    </section>
        </div>  

                <script src="js/bootstrap.min.js"></script>
                <script src="http://code.jquery.com/jquery-latest.js"></script>
</body>
</html>
